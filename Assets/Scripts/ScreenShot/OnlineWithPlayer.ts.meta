fileFormatVersion: 2
guid: bd2f96a634115d440ae987bd2608a8bf
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: "{\"source\":\"\\\"use strict\\\";\\r\\nObject.defineProperty(exports,
    \\\"__esModule\\\", { value: true });\\r\\nconst UnityEngine_1 = require(\\\"UnityEngine\\\");\\r\\nconst
    ZEPETO_Script_1 = require(\\\"ZEPETO.Script\\\");\\r\\nconst ZEPETO_Multiplay_Schema_1
    = require(\\\"ZEPETO.Multiplay.Schema\\\");\\r\\nconst OnlineSelfieCamera_1 =
    require(\\\"./OnlineSelfieCamera\\\");\\r\\nconst ClientStarter_1 = require(\\\"../ClientStarter\\\");\\r\\nclass
    OnlineWithPlayer extends ZEPETO_Script_1.ZepetoScriptBehaviour {\\r\\n    constructor()
    {\\r\\n        super(...arguments);\\r\\n        this.isWatching = false;\\r\\n       
    this.isTaking = false;\\r\\n        // target\uC5D0 \uB300\uD55C body\uC640 head\uC758
    weight \uC124\uC815\\r\\n        // - head\uAC00 target\uC758 \uC6C0\uC9C1\uC784\uC5D0
    \uB354 \uD06C\uAC8C \uBC18\uC751\uD558\uB3C4\uB85D \uD568 \\r\\n        this.bodyWeight
    = 0.3;\\r\\n        this.headWeight = 0.7;\\r\\n        this.rightHandBone =
    \\\"hand_R\\\";\\r\\n    }\\r\\n    Start() {\\r\\n        this.animator = this.GetComponent($typeof(UnityEngine_1.Animator));\\r\\n   
    }\\r\\n    Initialize(cameraPrefab, buttonUIPrefab) {\\r\\n        // ClientStarter.instance.Debug(cameraPrefab)\\r\\n       
    // ClientStarter.instance.Debug(buttonUIPrefab)\\r\\n        this.buttonUI =
    UnityEngine_1.GameObject.Instantiate(buttonUIPrefab, buttonUIPrefab.transform.parent).transform;\\r\\n       
    // ClientStarter.instance.Debug(this.buttonUI)\\r\\n        this.buttonUI.gameObject.SetActive(false);\\r\\n       
    this.cameraTarget = UnityEngine_1.GameObject.Instantiate(cameraPrefab).transform;\\r\\n       
    // ClientStarter.instance.Debug(this.cameraTarget)\\r\\n        let selfieCamera
    = this.cameraTarget.GetComponent($typeof(OnlineSelfieCamera_1.default));\\r\\n       
    this.gripTarget = selfieCamera.GetGripObject().transform;\\r\\n        // ClientStarter.instance.Debug(\\\"\uD558\uC774\\\")\\r\\n   
    }\\r\\n    SetPlayer(player, selfieStickPrefab) {\\r\\n        this.isTaking
    = true;\\r\\n        if (!player.isLocalPlayer) {\\r\\n            this.buttonUI.gameObject.SetActive(true);\\r\\n           
    this.selfieStick = UnityEngine_1.GameObject.Instantiate(selfieStickPrefab).transform;\\r\\n           
    player.character.GetComponentsInChildren($typeof(UnityEngine_1.Transform)).forEach((characterObj)
    => {\\r\\n                if (characterObj.name == this.rightHandBone) {\\r\\n                   
    this.selfieStick.parent = characterObj;\\r\\n                    this.selfieStick.localPosition
    = UnityEngine_1.Vector3.zero;\\r\\n                    this.selfieStick.localRotation
    = UnityEngine_1.Quaternion.Euler(UnityEngine_1.Vector3.zero);\\r\\n               
    }\\r\\n            });\\r\\n        }\\r\\n    }\\r\\n    RemovePlayer(player)
    {\\r\\n        this.isTaking = false;\\r\\n        UnityEngine_1.GameObject.Destroy(this.buttonUI.gameObject);\\r\\n       
    UnityEngine_1.GameObject.Destroy(this.cameraTarget.gameObject);\\r\\n       
    if (!player.isLocalPlayer) {\\r\\n            UnityEngine_1.GameObject.Destroy(this.selfieStick.gameObject);\\r\\n           
    this.cameraTarget = null;\\r\\n            this.gripTarget = null;\\r\\n           
    this.selfieStick = null;\\r\\n        }\\r\\n    }\\r\\n    Watch(watchTarget)
    {\\r\\n        if (this.isWatching) {\\r\\n            ClientStarter_1.default.instance.Debug(\\\"\uC774\uBBF8
    \uBCF4\uACE0 \uC788\uC2B5\uB2C8\uB2E4.\\\");\\r\\n        }\\r\\n        else
    {\\r\\n            this.watchTarget = watchTarget;\\r\\n            this.isWatching
    = true;\\r\\n        }\\r\\n    }\\r\\n    StopWatch() {\\r\\n        if (this.isWatching)
    {\\r\\n            this.watchTarget = null;\\r\\n            this.isWatching
    = false;\\r\\n        }\\r\\n        else {\\r\\n            ClientStarter_1.default.instance.Debug(\\\"\uC774\uBBF8
    \uAED0\uC2B5\uB2C8\uB2E4.\\\");\\r\\n        }\\r\\n    }\\r\\n    // \uC720\uC800\uAC00
    \uB85C\uCEEC\uC774 \uC544\uB2CC \uACBD\uC6B0\uC5D0\uB9CC \uC628\uB2E4\\r\\n   
    //\uB2E4\uB978 \uCE90\uB9AD\uD130 \uC5C5\uB370\uC774\uD2B8\\r\\n    OnUpdateOnline(player,
    screenPos) {\\r\\n        this.buttonUI.position = screenPos;\\r\\n        //
    ClientStarter.instance.Debug(\\\"\uD558\uC774\\\")\\r\\n        // ClientStarter.instance.Debug(this.buttonUI.gameObject.activeSelf)\\r\\n       
    // this.camera.position = this.ParseVector3(takingUser.cameraTransform.position)\\r\\n       
    // \uCC0D\uACE0 \uC788\uB294 \uD50C\uB808\uC774\uC5B4 foreach\\r\\n        const
    takingUser = ClientStarter_1.default.instance.GetRoom().State.selfiePlayer.get_Item(player.id);\\r\\n       
    if (takingUser.cameraTransform == null || takingUser.cameraTransform == undefined)
    {\\r\\n            ClientStarter_1.default.instance.Debug(`\uC704\uD5D8\uD560
    \uBED4 \uD588\uC2B5\uB2C8\uB2E4 - \uCE74\uBA54\uB77C\uC2A4\uD0A4\uB9C8 transform
    NULL`);\\r\\n        }\\r\\n        else {\\r\\n            // console.log(takingUser.cameraTransform.position)\\r\\n           
    this.cameraTarget.position = this.ParseVector3(takingUser.cameraTransform.position);\\r\\n           
    if (!player.isLocalPlayer) {\\r\\n                player.character.transform.LookAt(new
    UnityEngine_1.Vector3(this.cameraTarget.position.x, player.character.transform.position.y,
    this.cameraTarget.position.z));\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n   
    OnAnimatorIK(layerIndex) {\\r\\n        if (this.isWatching) {\\r\\n           
    this.animator.SetLookAtWeight(1, this.bodyWeight, 0.9);\\r\\n            // lookAt
    target \uC124\uC815\\r\\n            this.animator.SetLookAtPosition(this.watchTarget.position);\\r\\n       
    }\\r\\n        if (this.isTaking) {\\r\\n            this.animator.SetLookAtWeight(1,
    this.bodyWeight, this.headWeight);\\r\\n            // lookAt target \uC124\uC815\\r\\n           
    this.animator.SetLookAtPosition(this.cameraTarget.position);\\r\\n           
    // rightHand\uC758 target weight \uC124\uC815\\r\\n            this.animator.SetIKPositionWeight(UnityEngine_1.AvatarIKGoal.RightHand,
    1);\\r\\n            // rightHand\uAC00 \uBED7\uC744 \uC704\uCE58\uB97C Grip\uC73C\uB85C
    \uC124\uC815\\r\\n            this.animator.SetIKPosition(UnityEngine_1.AvatarIKGoal.RightHand,
    this.gripTarget.position);\\r\\n        }\\r\\n    }\\r\\n    ParseVector3(vector3)
    {\\r\\n        return new UnityEngine_1.Vector3(vector3.x, vector3.y, vector3.z);\\r\\n   
    }\\r\\n}\\r\\nexports.default = OnlineWithPlayer;\\r\\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT25saW5lV2l0aFBsYXllci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk9ubGluZVdpdGhQbGF5ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2Q0FBaUc7QUFFakcsaURBQXFEO0FBQ3JELHFFQUFtRTtBQUNuRSw2REFBc0Q7QUFDdEQsb0RBQTZDO0FBRTdDLE1BQXFCLGdCQUFpQixTQUFRLHFDQUFxQjtJQUFuRTs7UUFZWSxlQUFVLEdBQWEsS0FBSyxDQUFBO1FBQzVCLGFBQVEsR0FBYSxLQUFLLENBQUE7UUFFbEMsbUNBQW1DO1FBQ25DLHFDQUFxQztRQUM3QixlQUFVLEdBQVcsR0FBRyxDQUFDO1FBQ3pCLGVBQVUsR0FBVyxHQUFHLENBQUM7UUFFaEIsa0JBQWEsR0FBVyxRQUFRLENBQUE7SUFpSHJELENBQUM7SUEvR0csS0FBSztRQUNELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFlBQVksU0FBQyxzQkFBUSxFQUFHLENBQUE7SUFDakQsQ0FBQztJQUVNLFVBQVUsQ0FBQyxZQUF5QixFQUFFLGNBQTJCO1FBQ3BFLDZDQUE2QztRQUM3QywrQ0FBK0M7UUFDL0MsSUFBSSxDQUFDLFFBQVEsR0FBRyx3QkFBVSxDQUFDLFdBQVcsQ0FBYSxjQUFjLEVBQUUsY0FBYyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUE7UUFDN0csOENBQThDO1FBQzlDLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUN6QyxJQUFJLENBQUMsWUFBWSxHQUFHLHdCQUFVLENBQUMsV0FBVyxDQUFhLFlBQVksQ0FBQyxDQUFDLFNBQVMsQ0FBQTtRQUM5RSxrREFBa0Q7UUFDbEQsSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLFNBQUMsNEJBQWtCLEVBQUcsQ0FBQTtRQUN2RSxJQUFJLENBQUMsVUFBVSxHQUFHLFlBQVksQ0FBQyxhQUFhLEVB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\",\"assetPath\":\"Assets/Scripts/ScreenShot/OnlineWithPlayer.ts\",\"manifest\":{\"properties\":[{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"buttonUI\",\"type\":\"UnityEngine.Transform\",\"isArray\":false,\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]},{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"cameraTarget\",\"type\":\"UnityEngine.Transform\",\"isArray\":false,\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]}],\"name\":\"OnlineWithPlayer\",\"description\":\"\"},\"isCompiled\":true}"
  typescriptHash: cd0d0718b4525362e3a917fbb1d2d224
