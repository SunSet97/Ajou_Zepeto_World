fileFormatVersion: 2
guid: bd2f96a634115d440ae987bd2608a8bf
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: "{\"source\":\"\\\"use strict\\\";\\r\\nObject.defineProperty(exports,
    \\\"__esModule\\\", { value: true });\\r\\nconst UnityEngine_1 = require(\\\"UnityEngine\\\");\\r\\nconst
    ZEPETO_Script_1 = require(\\\"ZEPETO.Script\\\");\\r\\nconst OnlineSelfieCamera_1
    = require(\\\"./OnlineSelfieCamera\\\");\\r\\nconst ClientStarter_1 = require(\\\"../ClientStarter\\\");\\r\\nclass
    OnlineWithPlayer extends ZEPETO_Script_1.ZepetoScriptBehaviour {\\r\\n    constructor()
    {\\r\\n        super(...arguments);\\r\\n        this.isWatching = false;\\r\\n       
    this.isTaking = false;\\r\\n        // target\uC5D0 \uB300\uD55C body\uC640 head\uC758
    weight \uC124\uC815\\r\\n        // - head\uAC00 target\uC758 \uC6C0\uC9C1\uC784\uC5D0
    \uB354 \uD06C\uAC8C \uBC18\uC751\uD558\uB3C4\uB85D \uD568 \\r\\n        this.bodyWeight
    = 0.3;\\r\\n        this.headWeight = 0.7;\\r\\n        this.rightHandBone =
    \\\"hand_R\\\";\\r\\n    }\\r\\n    Start() {\\r\\n        this.animator = this.GetComponent($typeof(UnityEngine_1.Animator));\\r\\n   
    }\\r\\n    Initialize(cameraPrefab, buttonUIPrefab) {\\r\\n        ClientStarter_1.default.instance.Debug(cameraPrefab);\\r\\n       
    ClientStarter_1.default.instance.Debug(buttonUIPrefab);\\r\\n        this.buttonUI
    = UnityEngine_1.GameObject.Instantiate(buttonUIPrefab, buttonUIPrefab.transform.parent).transform;\\r\\n       
    ClientStarter_1.default.instance.Debug(this.buttonUI);\\r\\n        this.buttonUI.gameObject.SetActive(false);\\r\\n       
    this.cameraTarget = UnityEngine_1.GameObject.Instantiate(cameraPrefab).transform;\\r\\n       
    ClientStarter_1.default.instance.Debug(this.cameraTarget);\\r\\n        let selfieCamera
    = this.cameraTarget.GetComponent($typeof(OnlineSelfieCamera_1.default));\\r\\n       
    this.gripTarget = selfieCamera.GetGripObject().transform;\\r\\n        ClientStarter_1.default.instance.Debug(\\\"\uD558\uC774\\\");\\r\\n   
    }\\r\\n    SetPlayer(player, selfieStickPrefab) {\\r\\n        this.isTaking
    = true;\\r\\n        if (!player.isLocalPlayer) {\\r\\n            this.buttonUI.gameObject.SetActive(true);\\r\\n           
    this.selfieStick = UnityEngine_1.GameObject.Instantiate(selfieStickPrefab).transform;\\r\\n           
    player.character.GetComponentsInChildren($typeof(UnityEngine_1.Transform)).forEach((characterObj)
    => {\\r\\n                if (characterObj.name == this.rightHandBone) {\\r\\n                   
    this.selfieStick.parent = characterObj;\\r\\n                    this.selfieStick.localPosition
    = UnityEngine_1.Vector3.zero;\\r\\n                    this.selfieStick.localRotation
    = UnityEngine_1.Quaternion.Euler(UnityEngine_1.Vector3.zero);\\r\\n               
    }\\r\\n            });\\r\\n        }\\r\\n    }\\r\\n    RemovePlayer(player)
    {\\r\\n        this.isTaking = false;\\r\\n        UnityEngine_1.GameObject.Destroy(this.buttonUI.gameObject);\\r\\n       
    UnityEngine_1.GameObject.Destroy(this.cameraTarget.gameObject);\\r\\n       
    if (!player.isLocalPlayer) {\\r\\n            UnityEngine_1.GameObject.Destroy(this.selfieStick.gameObject);\\r\\n           
    this.cameraTarget = null;\\r\\n            this.gripTarget = null;\\r\\n           
    this.selfieStick = null;\\r\\n        }\\r\\n    }\\r\\n    Watch(watchTarget)
    {\\r\\n        if (this.isWatching) {\\r\\n            ClientStarter_1.default.instance.Debug(\\\"\uC774\uBBF8
    \uBCF4\uACE0 \uC788\uC2B5\uB2C8\uB2E4.\\\");\\r\\n        }\\r\\n        else
    {\\r\\n            this.watchTarget = watchTarget;\\r\\n            this.isWatching
    = true;\\r\\n        }\\r\\n    }\\r\\n    StopWatch() {\\r\\n        if (this.isWatching)
    {\\r\\n            this.watchTarget = null;\\r\\n            this.isWatching
    = false;\\r\\n        }\\r\\n        else {\\r\\n            ClientStarter_1.default.instance.Debug(\\\"\uC774\uBBF8
    \uAED0\uC2B5\uB2C8\uB2E4.\\\");\\r\\n        }\\r\\n    }\\r\\n    // \uC720\uC800\uAC00
    \uB85C\uCEEC\uC774 \uC544\uB2CC \uACBD\uC6B0\uC5D0\uB9CC \uC628\uB2E4\\r\\n   
    //\uB2E4\uB978 \uCE90\uB9AD\uD130 \uC5C5\uB370\uC774\uD2B8\\r\\n    OnUpdateOnline(player,
    screenPos) {\\r\\n        this.buttonUI.position = screenPos;\\r\\n        //
    ClientStarter.instance.Debug(\\\"\uD558\uC774\\\")\\r\\n        // ClientStarter.instance.Debug(this.buttonUI.gameObject.activeSelf)\\r\\n       
    // this.camera.position = this.ParseVector3(takingUser.cameraTransform.position)\\r\\n       
    // \uCC0D\uACE0 \uC788\uB294 \uD50C\uB808\uC774\uC5B4 foreach\\r\\n        const
    takingUser = ClientStarter_1.default.instance.GetRoom().State.selfiePlayer.get_Item(player.id);\\r\\n       
    if (takingUser.cameraTransform == null || takingUser.cameraTransform == undefined)
    {\\r\\n            ClientStarter_1.default.instance.Debug(`\uC704\uD5D8\uD560
    \uBED4 \uD588\uC2B5\uB2C8\uB2E4 - \uCE74\uBA54\uB77C\uC2A4\uD0A4\uB9C8 transform
    NULL`);\\r\\n        }\\r\\n        else {\\r\\n            // console.log(takingUser.cameraTransform.position)\\r\\n           
    this.cameraTarget.position = this.ParseVector3(takingUser.cameraTransform.position);\\r\\n           
    if (!player.isLocalPlayer) {\\r\\n                player.character.transform.LookAt(new
    UnityEngine_1.Vector3(this.cameraTarget.position.x, player.character.transform.position.y,
    this.cameraTarget.position.z));\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n   
    OnAnimatorIK(layerIndex) {\\r\\n        if (this.isWatching) {\\r\\n           
    this.animator.SetLookAtWeight(1, this.bodyWeight, 0.9);\\r\\n            // lookAt
    target \uC124\uC815\\r\\n            this.animator.SetLookAtPosition(this.watchTarget.position);\\r\\n       
    }\\r\\n        if (this.isTaking) {\\r\\n            this.animator.SetLookAtWeight(1,
    this.bodyWeight, this.headWeight);\\r\\n            // lookAt target \uC124\uC815\\r\\n           
    this.animator.SetLookAtPosition(this.cameraTarget.position);\\r\\n           
    // rightHand\uC758 target weight \uC124\uC815\\r\\n            this.animator.SetIKPositionWeight(UnityEngine_1.AvatarIKGoal.RightHand,
    1);\\r\\n            // rightHand\uAC00 \uBED7\uC744 \uC704\uCE58\uB97C Grip\uC73C\uB85C
    \uC124\uC815\\r\\n            this.animator.SetIKPosition(UnityEngine_1.AvatarIKGoal.RightHand,
    this.gripTarget.position);\\r\\n        }\\r\\n    }\\r\\n    ParseVector3(vector3)
    {\\r\\n        return new UnityEngine_1.Vector3(vector3.x, vector3.y, vector3.z);\\r\\n   
    }\\r\\n}\\r\\nexports.default = OnlineWithPlayer;\\r\\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT25saW5lV2l0aFBsYXllci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk9ubGluZVdpdGhQbGF5ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2Q0FBaUc7QUFFakcsaURBQXFEO0FBRXJELDZEQUFzRDtBQUN0RCxvREFBNkM7QUFFN0MsTUFBcUIsZ0JBQWlCLFNBQVEscUNBQXFCO0lBQW5FOztRQVlZLGVBQVUsR0FBYSxLQUFLLENBQUE7UUFDNUIsYUFBUSxHQUFhLEtBQUssQ0FBQTtRQUVsQyxtQ0FBbUM7UUFDbkMscUNBQXFDO1FBQzdCLGVBQVUsR0FBVyxHQUFHLENBQUM7UUFDekIsZUFBVSxHQUFXLEdBQUcsQ0FBQztRQUVoQixrQkFBYSxHQUFXLFFBQVEsQ0FBQTtJQWlIckQsQ0FBQztJQS9HRyxLQUFLO1FBQ0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsWUFBWSxTQUFDLHNCQUFRLEVBQUcsQ0FBQTtJQUNqRCxDQUFDO0lBRU0sVUFBVSxDQUFDLFlBQXlCLEVBQUUsY0FBMkI7UUFDcEUsdUJBQWEsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFBO1FBQzFDLHVCQUFhLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQTtRQUM1QyxJQUFJLENBQUMsUUFBUSxHQUFHLHdCQUFVLENBQUMsV0FBVyxDQUFhLGNBQWMsRUFBRSxjQUFjLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQTtRQUM3Ryx1QkFBYSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQzNDLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUN6QyxJQUFJLENBQUMsWUFBWSxHQUFHLHdCQUFVLENBQUMsV0FBVyxDQUFhLFlBQVksQ0FBQyxDQUFDLFNBQVMsQ0FBQTtRQUM5RSx1QkFB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\",\"assetPath\":\"Assets/Scripts/ScreenShot/OnlineWithPlayer.ts\",\"manifest\":{\"properties\":[{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"buttonUI\",\"type\":\"UnityEngine.Transform\",\"isArray\":false,\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]},{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"cameraTarget\",\"type\":\"UnityEngine.Transform\",\"isArray\":false,\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]}],\"name\":\"OnlineWithPlayer\",\"description\":\"\"},\"isCompiled\":true}"
  typescriptHash: 553d1ec51052d123d06a2bfddb078ee7
